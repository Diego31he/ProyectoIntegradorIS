package com.mmhfgroup.proyectointegrador.view;

import com.vaadin.flow.component.html.H1;
import com.vaadin.flow.component.html.Image;
import com.vaadin.flow.component.login.LoginForm;
import com.vaadin.flow.component.login.LoginI18n; // <-- IMPORT NECESARIO
import com.vaadin.flow.component.orderedlayout.VerticalLayout;
import com.vaadin.flow.router.BeforeEnterEvent;
import com.vaadin.flow.router.BeforeEnterObserver;
import com.vaadin.flow.router.PageTitle;
import com.vaadin.flow.router.Route;
import com.vaadin.flow.server.auth.AnonymousAllowed;

@Route("login")
@PageTitle("Login | Proyecto Integrador")
@AnonymousAllowed
public class LoginView extends VerticalLayout implements BeforeEnterObserver {

    private final LoginForm login = new LoginForm();

    public LoginView() {
        addClassName("login-view");
        setSizeFull();
        setAlignItems(Alignment.CENTER);
        setJustifyContentMode(JustifyContentMode.CENTER);

        // --- INICIO DE CORRECCIÓN ---

        // 1. Crear el objeto de internacionalización (i18n)
        LoginI18n i18n = LoginI18n.createDefault();

        // 2. Personalizar los textos
        LoginI18n.Form i18nForm = i18n.getForm();
        i18nForm.setTitle("Iniciar Sesión");
        i18nForm.setUsername("Usuario de SIUF"); // <-- CAMBIO DE "Username"
        i18nForm.setPassword("Contraseña de SIUF");      // <-- CAMBIO DE "Password"
        i18nForm.setSubmit("Ingresar");
        i18nForm.setForgotPassword("¿Olvidaste tu contraseña?");
        i18n.setForm(i18nForm);

        // 3. Personalizar mensajes de error
        LoginI18n.ErrorMessage i18nError = i18n.getErrorMessage();
        i18nError.setTitle("Error de autenticación");
        i18nError.setMessage("Usuario o contraseña incorrectos. Por favor, inténtalo de nuevo.");
        i18n.setErrorMessage(i18nError);

        // 4. Aplicar la personalización al formulario
        login.setI18n(i18n);

        // --- FIN DE CORRECCIÓN ---

        login.setAction("login");

        String logoBase64 = "data:image/png;base64,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";

        // 2. Usamos el string Base64 como la "fuente" (src) de la imagen.
        Image logo = new Image(logoBase64, "Logo Fasta");
        logo.setWidth("200px");

        add(logo, new H1("Proyecto Integrador - FI Universidad Fasta"), login);
    }

    @Override
    public void beforeEnter(BeforeEnterEvent beforeEnterEvent) {
        // Informar al usuario si hay un error de login (ej. credenciales inválidas)
        if (beforeEnterEvent.getLocation()
                .getQueryParameters()
                .getParameters()
                .containsKey("error")) {
            login.setError(true);
        }
    }
}